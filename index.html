<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./IMG/favicon.ico" type="image/x-icon" />
    <title>Boletim PCA 2025 - STI</title>    <!-- Layout e Tokens -->
    <link rel="stylesheet" href="./css/layout/Tokens.css">
    <link rel="preload" href="./css/layout/Main.css" as="style">
    <link rel="stylesheet" href="./css/layout/Main.css">
      <!-- Componentes -->
    <link rel="stylesheet" href="./css/components/Emojis.css">
    <link rel="stylesheet" href="./css/components/Areas.css">
    <link rel="stylesheet" href="./css/components/Orcamento.css">
    <link rel="stylesheet" href="./css/components/StatusAtrasado.css">
    <link rel="stylesheet" href="./css/components/AtualizacaoAutomatica.css">
    <link rel="stylesheet" href="./css/components/LimparFiltros.css">
    <link rel="stylesheet" href="./css/components/DeviceDetection.css">
    <link rel="stylesheet" href="./css/components/PainelResumoCollapsible.css">
      <!-- Mobile -->
    <link rel="stylesheet" href="./css/mobile/Mobile.css">
    <link rel="stylesheet" href="./css/mobile/MobileFilters.css">
    <link rel="stylesheet" href="./css/mobile/MobileGoogleSheetFilters.css">
    <link rel="stylesheet" href="./css/mobile/MobileMenu.css">
    <link rel="stylesheet" href="./css/mobile/MobileCompactCards.css"><!-- Utils -->
    <script src="./JS/utils/TableFormatters.js" defer></script>
    <script src="./JS/utils/EmojiAnimation.js" defer></script>
    <script src="./JS/utils/StatusClasses.js" defer></script>
    <script src="./JS/utils/AreasClasses.js" defer></script>
    <script src="./JS/utils/OrcamentoClasses.js" defer></script>
      <!-- Mobile -->
    <script src="./JS/mobile/MobileDeviceDetection.js" defer></script>
    <script src="./JS/mobile/MobileMenu.js" defer></script>
    <script src="./JS/mobile/MobileGoogleSheetFilters.js" defer></script>
    <script src="./JS/mobile/MobileCompactCards.js" defer></script>
    
    <!-- UI Components -->
    <script src="./JS/ui/PainelDeResumos.js" defer></script>
    <script src="./JS/ui/PainelResumoCollapsible.js" defer></script>
    <script src="./JS/ui/PrintFunction.js" defer></script>
    <script src="./JS/ui/btnCancelados.js" defer></script>
    <script src="./JS/ui/btnPCAPublicada.js" defer></script>
    <script src="./JS/ui/btnFonteDeDados.js" defer></script>
    <script src="./JS/ui/btnAnalytics.js" defer></script>
    
    <!-- Filters -->
    <script src="./JS/filters/GoogleSheetFilters.js" defer></script>
    <script src="./JS/filters/FilterControls.js" defer></script>
    <script src="./JS/filters/ClearFiltersButton.js" defer></script>
    
    <!-- Core -->
    <script src="./JS/core/Main.js" defer></script>
    <script src="./JS/core/OrganizacaoDosDados.js" defer></script>
    <script src="./JS/core/AtualizacaoAutomatica.js" defer></script>
    
    <!-- Handlers -->
    <script src="./JS/handlers/PainelResumoUpdates.js" defer></script>
    <script src="./JS/handlers/UpdateStatus.js" defer></script>
    <script src="./JS/handlers/StatusAtrasado.js" defer></script>
    <script src="./JS/handlers/RenovacaoAtrasada.js" defer></script>
    <script src="./JS/handlers/InformacoesDeContratos.js" defer></script>
    <script src="./JS/handlers/AcompanhamentoDeProjetos.js" defer></script>

    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
    <!-- overlay de carregamento -->
    <div id="loading-overlay">
      <div class="loader"> ‚è≥ Carregando dados, por favor aguarde...</div>
    </div>    <header>
        <img src="./IMG/tribunal.png" alt="Tribunal" size="10" class="logo-tribunal">
        <h1>Boletim PCA 2025 - STI</h1>    </header>
    
    <!-- Container para bot√µes de controle no mobile -->
    <div class="mobile-controls-container">
        <!-- Bot√£o para expandir/recolher o painel de resumos -->
        <button id="painel-toggle-btn" class="painel-toggle-btn" title="Mostrar/Ocultar Painel de Resumos">
            <span class="toggle-icon">üìä</span>
            <span class="toggle-text">Resumos</span>
        </button>
        
        <!-- Bot√£o de Menu Mobile -->
        <button id="mobile-menu-btn" class="mobile-menu-btn" title="Menu">
            <span class="hamburger-icon">‚ò∞</span>
            <span class="menu-text">Menu</span>
        </button>
    </div>    <!-- Container do painel de resumos -->
    <div id="painel-resumo-container" class="painel-resumo-container collapsed">
        <div class="painel-resumo-header">
            <h3>üìà Painel de Resumos</h3>
            <button id="painel-close-btn" class="painel-close-btn" title="Expandir/Recolher painel">
                <span class="arrow-icon">‚Üì</span>
            </button>
        </div>
        <div class="painel-resumo"> ... </div>
    </div>
    
    <div class="linha-decorativa"></div><!-- Toolbar para bot√µes -->
    <div id="toolbar" class="toolbar">
        <button class="btn" id="btnFonteDeDados">Fonte de Dados <span class="emoji-icon">üìà</span></button>        <button class="btn btn-relatorio-analitico" id="btnRelatorioAnalitico">RELAT√ìRIO ANAL√çTICO <span class="emoji-icon">üìä</span></button>
        <button class="btn btn-expand-cards mobile-only" id="btnExpandCards" style="display: none;">Expandir Todos <span class="emoji-icon">üìã</span></button>
        <button class="btn btn-pca-publicada" id="btnPCAPublicada">PCA Publicada <span class="emoji-icon">üîó</span></button>
        <button class="btn btn-limpar-filtros" id="btnToggleCancelados">Ocultar Cancelados <span class="emoji-icon">‚ùå</span></button>
        <button class="btn btn-limpar-filtros" id="btnLimparFiltros"><span class="emoji-icon">üöÆ</span> Limpar Filtros</button>
        <button class="btn btn-print" id="btnPrint"><span class="emoji-icon">üñ®Ô∏è</span> Imprimir</button>
    </div>    <!-- Filtros para dispositivos m√≥veis - Sistema Google Sheets -->
    <details id="mobile-filters">
      <summary>Filtros</summary>
      <!-- Os bot√µes de filtro ser√£o criados dinamicamente pelo JavaScript -->
    </details>

    <section id="detalhes">
        <table>
            <thead class="cabecalho">
                <tr>
                    <th>ID PCA</th>
                    <th>√Årea</th>
                    <th>Tipo</th>
                    <th>Projeto de Aquisi√ß√£o</th>
                    <th>Acompanhamento</th>
                    <th>Status do Processo</th>
                    <th>Contratar At√©</th>
                    <th>Valor PCA</th>
                    <th>Or√ßamento</th>
                    <th>Processo</th>
                </tr>
                <tr class="filter-row">
                    <!-- Coluna 0 ‚Äì ID PCA -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="0">ID <span class="filter-icon">‚ñº</span></button>
                    </th>

                    <!-- Coluna 1 ‚Äì √Årea -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="1">√Årea <span class="filter-icon">‚ñº</span></button>
                    </th>

                    <!-- Coluna 2 ‚Äì Tipo -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="2">Tipo <span class="filter-icon">‚ñº</span></button>
                    </th>

                    <!-- Coluna 3 ‚Äì Projeto de Aquisi√ß√£o -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="3">Projeto <span class="filter-icon">‚ñº</span></button>
                    </th>

                    <!-- Coluna 4 ‚Äì Status In√≠cio -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="4">Status In√≠cio <span class="filter-icon">‚ñº</span></button>
                    </th>

                    <!-- Coluna 5 ‚Äì Status do Processo -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="5">Status Processo <span class="filter-icon">‚ñº</span></button>
                    </th>

                    <!-- Coluna 6 ‚Äì Contratar At√© -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="6">Contratar At√© <span class="filter-icon">‚ñº</span></button>
                    </th>

                    <!-- Coluna 7 ‚Äì Valor PCA -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="7">Valor PCA <span class="filter-icon">‚ñº</span></button>
                    </th>

                    <!-- Coluna 8 ‚Äì Or√ßamento -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="8">Or√ßamento <span class="filter-icon">‚ñº</span></button>
                    </th>

                    <!-- Coluna 9 ‚Äì Processo -->
                    <th>
                        <button class="google-sheet-filter-btn" data-col-index="9">Processo <span class="filter-icon">‚ñº</span></button>
                    </th>
                </tr>
            </thead>
            <tbody>
                <!-- As linhas ser√£o preenchidas via API Google Sheets -->
            </tbody>
        </table>
    </section>

    <footer>
        <p>Status atualizado em: </p>
    </footer>

    <!-- Modal para exibir o iframe -->
    <div id="processo-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <button id="close-modal-btn" class="close-button" aria-label="Fechar">
              <span>‚ùå</span> Sair
            </button>
            <iframe id="processo-iframe" src="about:blank" frameborder="0"></iframe>
        </div>
    </div> <!-- Fim da .modal-content principal -->
    </div> <!-- Fim da #processo-modal-overlay -->

    <!-- Nova Modal para Notifica√ß√£o de Atualiza√ß√£o -->
    <div id="update-notification-overlay" class="update-notification-overlay">
        <div class="update-notification-content">
            <h3 id="update-notification-title">Atualiza√ß√µes Detectadas</h3>
            <div id="update-notification-details">
                <!-- Detalhes das atualiza√ß√µes ser√£o inseridos aqui pelo JS -->
            </div>
            <button id="update-notification-close-btn">Fechar</button>
        </div>
    </div>

</body>
</html>
