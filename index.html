<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./IMG/favicon.ico" type="image/x-icon" />
    <title>Boletim PCA 2025 - STI</title>
    <link rel="stylesheet" href="./css/tokens.css">
    <link rel="preload" href="./css/style.css" as="style">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/style-emojis.css">
    <link rel="stylesheet" href="./css/style-areas.css">
    <link rel="stylesheet" href="./css/style-orcamento.css">
    <link rel="stylesheet" href="./css/style-status_atrasado.css">
    <link rel="stylesheet" href="css/style-mobile.css">
    <link rel="stylesheet" href="css/style-atualizacao_automatica.css">
    
    <script src="./JS/main.js" defer></script>
    <script src="./JS/table-formatters.js" defer></script>
    <script src="./JS/filter-controls.js" defer></script>
    <script src="./JS/OrganizacaoDosDados.js" defer></script>
    <script src="./JS/emoji animation function.js" defer></script>
    <script src="./JS/PainelDeResumos.js" defer></script>
    <script src="./JS/PrintFunction.js" defer></script>
    <script src="./JS/btnCancelados.js" defer></script>
    <script src="./JS/updateStatus.js" defer></script>
    <script src="./JS/status-classes.js" defer></script>
    <script src="./JS/areas-classes.js" defer></script>
    <script src="./JS/orcamento-classes.js" defer></script>
    <script src="./JS/btnPCAPublicada.js" defer></script>
    <script src="./JS/StatusAtrasado.js" defer></script>
    <script src="./JS/btnFonteDeDados.js" defer></script>
    <script src="./JS/RenovacaoAtrasada.js" defer></script>
    <script src="./JS/AtualizacaoAutomatica.js" defer></script>
    <script src="./JS/InformacoesDeContratos.js" defer></script>
    <script src="./JS/AcompanhamentoDeProjetos.js" defer></script>
    <script src="./JS/btnAnalytics.js" defer></script>

    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" defer></script>  
</head>
<body>
    <!-- overlay de carregamento -->
    <div id="loading-overlay">
      <div class="loader"> ‚è≥ Carregando dados, por favor aguarde...</div>
    </div>

    <header>
        <img src="./IMG/tribunal.png" alt="Tribunal" size="10" class="logo-tribunal">
        <h1>Boletim PCA 2025 - STI</h1>
    </header>
    <details id="painel-resumo-details" class="painel-resumo-details" open>
      <summary>Painel de Resumo</summary>
      <div class="painel-resumo"> ... </div>
    </details>
    <div class="linha-decorativa"></div>

    <!-- Toolbar para bot√µes -->
    <div class="toolbar">
        <button class="btn" id="btnFonteDeDados">Fonte de Dados <span class="emoji-icon">üìà</span></button>
        <button class="btn btn-relatorio-analitico" id="btnRelatorioAnalitico">RELAT√ìRIO ANAL√çTICO <span class="emoji-icon">üìä</span></button>
        <button class="btn btn-pca-publicada" id="btnPCAPublicada">PCA Publicada <span class="emoji-icon">üîó</span></button>
        <button class="btn btn-limpar-filtros" id="btnToggleCancelados">Ocultar Cancelados <span class="emoji-icon">‚ùå</span></button>
        <button class="btn btn-limpar-filtros" id="btnLimparFiltros"><span class="emoji-icon">üöÆ</span> Limpar Filtros</button>
        <button class="btn btn-print" id="btnPrint"><span class="emoji-icon">üñ®Ô∏è</span> Imprimir</button>
    </div>

    <!-- Filtros para dispositivos m√≥veis -->
    <details id="mobile-filters">
      <summary>Filtros</summary>
      <input type="text" id="filtroProjeto" placeholder="Filtrar Projeto de Aquisi√ß√£o">
      <input type="text" id="filtroIdPcaMobile" placeholder="Filtrar ID PCA" style="width:55px;height:15px;" data-col-index="0">
      <select id="filter-area-mobile" style="width:115px;height:21px;">
          <option value="">√Åreas</option>
      </select>
      <select id="filter-tipo-mobile" style="width:70px;height:21px;">
          <option value="">üõí/üîÑ</option>
      </select>
      <input type="text" id="filtroStatusInicioMobile" placeholder="Filtrar Status In√≠cio" style="width:80px;height:15px;" data-col-index="4">
      <!-- Filtro de Status do Processo (dropdown multi) pode ser simplificado para um select no mobile -->
      <select id="filter-status-processo-mobile" style="width:100%;">
          <option value="">Status do Processo</option>
      </select>
      <input type="text" id="filtroContratarAteMobile" placeholder="Filtrar Contratar At√©" style="width:100px;height:15px;" data-col-index="6">
      <input type="text" id="filtroValorPcaMobile" placeholder="Filtrar Valor PCA" style="width:110px;height:15px;" data-col-index="7">
      <select id="filter-orcamento-mobile" style="width:105px;height:21px;">
          <option value="">Or√ßamentos</option>
      </select>
      <input type="text" id="filtroProcessoMobile" placeholder="Filtrar Processo" style="width:105px;height:15px;" data-col-index="9">
    </details>

    <section id="detalhes">
        <table>
            <thead class="cabecalho">
                <tr>
                    <th>ID PCA</th>
                    <th>√Årea</th>
                    <th>Tipo</th>
                    <th>Projeto de Aquisi√ß√£o</th>
                    <th>Acompanhamento</th>
                    <th>Status do Processo</th>
                    <th>Contratar At√©</th>
                    <th>Valor PCA</th>
                    <th>Or√ßamento</th>
                    <th>Processo</th>
                </tr>
                <tr class="filter-row">
                    <!-- Coluna 0 ‚Äì ID PCA -->
                    <th>
                        <input data-col-index="0" type="text" placeholder="Filtrar ID" style="width:55px;height:15px;">
                    </th>

                    <!-- Coluna 1 ‚Äì √Årea (select j√° funciona) -->
                    <th>
                        <select id="filter-area" style="width:115px;height:21px;">
                            <option value="">√Åreas</option>
                        </select>
                    </th>

                    <!-- Coluna 2 ‚Äì Tipo (select j√° funciona) -->
                    <th>
                        <select id="filter-tipo" style="width:70px;height:21px;">
                            <option value="">üõí/üîÑ</option>
                        </select>
                    </th>

                    <!-- Coluna 3 ‚Äì Projeto de Aquisi√ß√£o -->
                    <th>
                        <input data-col-index="3" type="text" placeholder="Filtrar Projeto de Aquisi√ß√£o">
                    </th>

                    <!-- Coluna 4 ‚Äì Status In√≠cio -->
                    <th>
                        <input data-col-index="4" type="text" placeholder="Filtrar Status In√≠cio" style="width:80px;height:15px;">
                    </th>

                    <!-- Coluna 5 ‚Äì Status do Processo (dropdown j√° funciona) -->
                    <th>
                        <div id="status-filter" class="dropdown-multi">
                            <!-- bot√£o que abre a lista -->
                            <button type="button" class="filter-toggle">Filtrar Status do Processo‚ñº</button>

                            <!-- painel flutuante (fica invis√≠vel at√© o JS abrir) -->
                            <div class="filter-panel">
                                <div class="filter-header">
                                    <a href="#" class="select-all">Selecionar tudo</a> ¬∑
                                    <a href="#" class="clear">Limpar</a>
                                    <span class="count"></span>
                                </div>

                                <input type="text" class="search" placeholder="Buscar..." />

                                <ul class="options"></ul> <!-- JS insere as op√ß√µes aqui -->
                            </div>
                        </div>
                    </th>

                    <!-- Coluna 6 ‚Äì Contratar At√© -->
                    <th>
                        <input data-col-index="6" type="text" placeholder="Filtrar Contratar At√©" style="width:100px;height:15px;">
                    </th>

                    <!-- Coluna 7 ‚Äì Valor PCA -->
                    <th>
                        <input data-col-index="7" type="text" placeholder="Filtrar Valor PCA" style="width:110px;height:15px;">
                    </th>

                    <!-- Coluna 8 ‚Äì Or√ßamento -->
                    <th>
                        <select id="filter-orcamento" style="width:105px;height:21px;">
                            <option value="">Or√ßamentos</option>
                        </select>
                    </th>

                    <!-- Coluna 9 ‚Äì Processo -->
                    <th>
                        <input data-col-index="9" type="text" placeholder="Filtrar Processo" style="width:105px;height:15px;">
                    </th>
                </tr>
            </thead>
            <tbody>
                <!-- As linhas ser√£o preenchidas via API Google Sheets -->
            </tbody>
        </table>
    </section>

    <footer>
        <p>Status atualizado em: </p>
    </footer>

    <!-- Modal para exibir o iframe -->
    <div id="processo-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <button id="close-modal-btn" class="close-button" aria-label="Fechar">
              <span>‚ùå</span> Sair
            </button>
            <iframe id="processo-iframe" src="about:blank" frameborder="0"></iframe>
        </div>
    </div> <!-- Fim da .modal-content principal -->
    </div> <!-- Fim da #processo-modal-overlay -->

    <!-- Nova Modal para Notifica√ß√£o de Atualiza√ß√£o -->
    <div id="update-notification-overlay" class="update-notification-overlay">
        <div class="update-notification-content">
            <h3 id="update-notification-title">Atualiza√ß√µes Detectadas</h3>
            <div id="update-notification-details">
                <!-- Detalhes das atualiza√ß√µes ser√£o inseridos aqui pelo JS -->
            </div>
            <button id="update-notification-close-btn">Fechar</button>
        </div>
    </div>

</body>
</html>
