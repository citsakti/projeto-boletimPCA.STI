/* TOC.css - Estilos do índice lateral analítico */

:root { --toc-width: 250px; }

/* Layout fixo geral */
body.with-fixed-layout { overflow-x: hidden; }
#main-header { position: fixed; top:0; left:0; right:0; z-index: 1030; background: transparent; }
#main-header > .col-12 > .d-flex { background: var(--brand-primary, #0d6efd); border-radius: 0 0 .5rem .5rem; padding-inline: 1rem; }
#toolbar-row { position: fixed; top: var(--header-height, 70px); left:0; right:0; z-index:1031; }
#main-toolbar { background: #f8f9fa!important; box-shadow: 0 2px 4px rgba(0,0,0,.08); }
.main-content-wrapper { position: relative; }

/* Container do índice fixo */
.toc-container { position: fixed; left: 0; top: var(--fixed-toc-top, 140px); width: var(--toc-width); bottom: 0; background:#f8f9fa; border-right:1px solid #dee2e6; padding: 1rem .85rem 1.25rem; overflow-y:auto; font-size:.9rem; z-index:1029; }

/* Ajustar coluna principal para não ficar sob o TOC */
@media (min-width: 992px) { .main-content-wrapper .row.gx-3 > .col { margin-left: var(--toc-width); } }

.toc-title {
  font-weight: 600;
  text-transform: uppercase;
  font-size: 0.75rem;
  letter-spacing: .05em;
  color: #6c757d;
  margin-bottom: .5rem;
}

.toc-list { list-style: none; margin: 0; padding: 0; }
.toc-list > li { margin: 0 0 .25rem 0; padding: 0; }
.toc-sublist { list-style: none; padding-left: .75rem; margin: .25rem 0 .5rem; border-left: 2px solid #e2e3e5; }
.toc-sublist li { margin:0; }

.toc-link { display: block; padding: .35rem .5rem; border-radius: .25rem; color: #212529; text-decoration: none; transition: background .15s, color .15s; line-height: 1.2; }
.toc-link:hover { background: #e9ecef; text-decoration: none; }
.toc-link.active { background: var(--brand-primary, #0d6efd); color: #fff; font-weight: 600; }
.toc-sublist .toc-link { font-size: .78rem; padding: .25rem .5rem; }

/* Ajustes de ancoragem */
.analytics-section { scroll-margin-top: 140px; }
.analytics-section h3 { scroll-margin-top: 145px; }
html { scroll-behavior: smooth; }

/* Reduções progressivas de largura */
@media (max-width: 1600px) { :root { --toc-width: 230px; } }
@media (max-width: 1400px) { :root { --toc-width: 210px; } }
@media (max-width: 1250px) { :root { --toc-width: 190px; } .toc-link { font-size: .8rem; } }
@media (max-width: 1100px) { :root { --toc-width: 170px; } .toc-link { font-size: .75rem; } .toc-sublist .toc-link { font-size: .7rem; } }

/* Mobile */
@media (max-width: 991.98px) { 
  #main-header, #toolbar-row { position: static; }
  .toc-container { position: static; top: auto!important; width: 100%; max-height: none; border:1px solid #e2e3e5; display: none; margin-top: .5rem; border-right:none; }
  .main-content-wrapper .row.gx-3 > .col { margin-left: 0!important; }
  .toc-toggle-btn { display: inline-flex; }
}

.toc-toggle-btn { position: fixed; top: 10px; left: 10px; z-index: 1100; display: none; }

/* Quando o TOC está visível em mobile via JS */
@media (max-width: 991.98px) { .toc-container.toc-visible { display: block !important; } }

/* Ajuste visual quando visível em mobile */
.toc-container.toc-visible { display:block !important; }

/* Barra de rolagem mais discreta dentro do índice */
.toc-container::-webkit-scrollbar { width: 8px; }
.toc-container::-webkit-scrollbar-track { background: transparent; }
.toc-container::-webkit-scrollbar-thumb { background: #ced4da; border-radius: 4px; }
.toc-container::-webkit-scrollbar-thumb:hover { background: #adb5bd; }
